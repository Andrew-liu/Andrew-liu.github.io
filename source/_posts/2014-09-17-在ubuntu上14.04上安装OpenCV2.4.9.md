---
layout : post
date: 2014-09-17 22:31:42 +0800
title: 在ubuntu上14.04上安装OpenCV2.4.9
tags: Linux
comments: true
---


#Step 1 升级软件包仓库

这一步非常重要，会帮助安装需要的最新的包和安装OpenCV的一些相关依赖项


```
sudo apt-get update
sudo apt-get upgrade
```


<!--more-->


#Step 2 卸载过去安装的 FFMPEG 和 x264 libraries
若提示并没有此类文件， 说明并没有安装过， 可以直接执行下一步

```
sudo apt-get remove ffmpeg x264 libx264-dev
```

#Step 3 安装编译OpenCV必要包
下面的命令是一条， 请全部黏贴并执行

> Note: 其中`ocl-icd-libopencl1`包被安装是因为我的电脑中不少英伟达的显卡，如果你的电话是英伟达的显卡，请将其中`ocl-icd-libopencl1`安装包改为`libopencv-dev`

查看显卡信息可以在System setting中的System info

```
sudo apt-get install ocl-icd-libopencl1 build-essential checkinstall cmake pkg-config 
yasm libjpeg-dev libjasper-dev libavcodec-dev libavformat-dev libswscale-dev 
libdc1394-22-dev libxine-dev libgstreamer0.10-dev libgstreamer-plugins-base0.10-dev 
libv4l-dev python-dev python-numpy libtbb-dev libqt4-dev libgtk2.0-dev libfaac-dev 
libmp3lame-dev libopencore-amrnb-dev libopencore-amrwb-dev libtheora-dev libvorbis-dev 
libxvidcore-dev x264 v4l-utils
```

#Step 4 建立一个名为OpenCV的目录

```
mkdir opencv
cd /opencv/
```

#Step 5 下载并解压需要Linux版本的2.4.9 OpenCV源文件


```
//下载方法一，直接官网下载，下载地址
http://opencv.org/downloads.html
//下载方法二，
wget -O OpenCV-2.4.9.zip http://fossies.org/linux/misc/opencv-2.4.9.zip

下载到创建的OpenCV目录下后
unzip OpenCV-2.4.9.zip
cd opencv-2.4.9
```

#Step 6 创建一个文件夹用来编译原文件

```
mkdir build
cd build
```

#Step 7 使用cmake简历源文件并安装

```
sudo apt-get install camke
//要保证你的当前路径中不含有空格， 查看当前路径使用命令pwd

//以下为一条命令
cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D WITH_TBB=ON 
-D BUILD_NEW_PYTHON_SUPPORT=ON -D WITH_V4L=ON -D INSTALL_C_EXAMPLES=ON 
-D INSTALL_PYTHON_EXAMPLES=ON -D BUILD_EXAMPLES=ON -D WITH_QT=ON -D WITH_OPENGL=ON ..


//这一步执行时间较长， 在build目录下执行下面几个命令
make
sudo make install

sudo sh -c 'echo "/usr/local/lib" > /etc/ld.so.conf.d/opencv.conf'
sudo ldconfig

```

#Step 8  重启电脑

#Step 9 测试OpenCV安装是否成功

```
//进入OpenCV安装目录
cd /usr/local/share/OpenCV/samples/cpp

//编译文件生成可执行文件
g++ houghlines.cpp -o application `pkg-config --cflags --libs opencv`

//运行文件会看到运行图，表示测试成功
./application
```

![程序运行图](http://4.bp.blogspot.com/-qLZ3nCElxwk/U8tZ106FqnI/AAAAAAAACDc/6bRde-vEpJ8/s1600/Screenshot+from+2014-07-20+10:19:07.png)




翻译自[INSTALLING OPENCV 2.4.9 IN UBUNTU 14.04](http://dsynflo.blogspot.com/2014/07/installing-opencv-249-in-ubuntu-1404.html)

