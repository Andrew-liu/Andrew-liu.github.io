<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> IOS之UITabBarController · Snow Memory | Andrew Liu</title><meta name="description" content="IOS之UITabBarController - Andrew Liu"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://andrewliu.in/atom.xml" title="Snow Memory | Andrew Liu"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/dinosaurliu" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/Andrew-liu" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">IOS之UITabBarController</h1><div class="post-info">Dec 19, 2014</div><div class="post-content"><h2 id="1-UITabBarController简单使用"><a href="#1-UITabBarController简单使用" class="headerlink" title="#1. UITabBarController简单使用"></a>#1. UITabBarController简单使用</h2><ol>
<li>初始化<code>UITabBarController</code></li>
<li>设置UIWindow的<code>rootViewController</code>为UITabBarController</li>
<li>根据具体情况, 通过addChildViewController方法添加对应个数的子控制器</li>
</ol>
<p><code>UITabBarController添加控制器的方式有2种</code> :<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//添加单个子控制器</span></div><div class="line">- (<span class="keyword">void</span>)addChildViewController:(UIViewController *)childController;</div><div class="line"></div><div class="line"><span class="comment">//设置子控制器数组</span></div><div class="line">@property(nonatomic,copy) NSArray *viewControllers;</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>##1.1. UITabBarButton中UITabBarItem的属性</p>
<blockquote>
<p>UITabBarController的高度为49</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//标题文字</span></div><div class="line">@property(nonatomic,copy) NSString *title;</div><div class="line"><span class="comment">//选中时的图标</span></div><div class="line">@property(nonatomic,retain) UIImage *selectedImage;</div><div class="line"><span class="comment">//提醒数字</span></div><div class="line">@property(nonatomic,copy) NSString *badgeValue;</div><div class="line">self.tabBarItem.badageValue = @<span class="string">"10"</span>;</div><div class="line"><span class="comment">//图标</span></div><div class="line">@property(nonatomic,retain) UIImage *image;</div></pre></td></tr></table></figure>
<blockquote>
<p>当在某个界面不想显示TabBar工具条时, 在控制器属性中设置&gt; <code>hide bottom bar (隐藏底部的工具栏)</code></p>
</blockquote>
<p>##1.2. 主流UI框架</p>
<h2 id="2-控制器声明周期"><a href="#2-控制器声明周期" class="headerlink" title="#2. 控制器声明周期"></a>#2. 控制器声明周期</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">//view加载完毕调用</div><div class="line">- (void)viewDidLoad &#123;</div><div class="line">    [super viewDidLoad];</div><div class="line">    // Do any additional setup after loading the view.</div><div class="line">    NSLog(@&quot;didload&quot;);</div><div class="line">&#125;</div><div class="line">//view即将显示到window上</div><div class="line">- (void)viewWillAppear:(BOOL)animated</div><div class="line">&#123;</div><div class="line">    [super viewWillAppear:animated];</div><div class="line">    NSLog(@&quot;willapper&quot;);</div><div class="line">&#125;</div><div class="line">//view显示完毕(已经实现到窗口)</div><div class="line">-(void)viewDidAppear:(BOOL)animated</div><div class="line">&#123;</div><div class="line">    [super viewDidAppear:animated];</div><div class="line">    NSLog(@&quot;didappear&quot;);</div><div class="line">&#125;</div><div class="line">//view即将从window上移除(即将看不见)</div><div class="line">- (void)viewWillDisappear:(BOOL)animated</div><div class="line">&#123;</div><div class="line">    [super viewWillDisappear:animated];</div><div class="line">    NSLog(@&quot;willids&quot;);</div><div class="line">&#125;</div><div class="line">//view从window上完全移除</div><div class="line">- (void)viewDidDisappear:(BOOL)animated</div><div class="line">&#123;</div><div class="line">    [super viewDidDisappear:animated];</div><div class="line">    NSLog(@&quot;diddisappear&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="3-Modal"><a href="#3-Modal" class="headerlink" title="#3. Modal"></a>#3. Modal</h2><blockquote>
<p>show之外, 另一种控制器的切换方式<code>Modal</code></p>
</blockquote>
<ul>
<li>从底向上弹出, 并且将所覆盖的控制器弹开(暂时, 根控制器始终不变)</li>
<li>控制器向下离开时, 会将弹开的控制器放回</li>
<li><code>通过会在Modal外包装一层导航控制器</code></li>
</ul>
<blockquote>
<p>界面之间联系紧密一般用Show, 联系不紧密用Modal</p>
</blockquote>
<p>##3.1. Modal的显示与销毁</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//以Modal的形式展示控制器</span></div><div class="line">- (<span class="keyword">void</span>)presentViewController:(UIViewController *)viewControllerToPresent animated: (BOOL)flag completion:(<span class="keyword">void</span> (^)(<span class="keyword">void</span>))completion</div><div class="line"><span class="comment">//关闭当初Modal出来的控制器, 自我销毁</span></div><div class="line">- (<span class="keyword">void</span>)dismissViewControllerAnimated: (BOOL)flag completion: (<span class="keyword">void</span> (^)(<span class="keyword">void</span>))completion;</div><div class="line"></div><div class="line"><span class="comment">//点击按钮弹出新的控制器</span></div><div class="line">- (IBAction)jump &#123;</div><div class="line">    <span class="comment">//展示TwoViewController</span></div><div class="line">    TwoViewController *two = [[TwoViewController alloc] init];</div><div class="line">    <span class="comment">//在弹窗控制器外包装一层导航控制器</span></div><div class="line">    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:two];</div><div class="line">    [self presentViewController:nav animated:YES completion:^&#123;</div><div class="line">        NSLog(@<span class="string">"展示动画完毕"</span>); <span class="comment">// 动画执行完调用</span></div><div class="line">    &#125;];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</div><div class="line">    [super viewDidLoad];</div><div class="line">    <span class="comment">// Do any additional setup after loading the view from its nib.</span></div><div class="line">    self.title = @<span class="string">"第二个控制器"</span>;  <span class="comment">//设置导航控制器的标题</span></div><div class="line">    self.navigationItem.leftBarButtonItem = [[UIBarButtonItem  alloc] initWithTitle:@<span class="string">"取消"</span> style:UIBarButtonItemStyleDone target:self action:@selector(cancel)];  <span class="comment">//设置导航控制器的Item</span></div><div class="line">&#125;;</div><div class="line"><span class="comment">//点击导航控制器的Item按钮销毁控制器</span></div><div class="line">- (IBAction)cancel &#123;</div><div class="line">    [self dismissViewControllerAnimated:YES completion:^&#123;</div><div class="line">        NSLog(@<span class="string">"关闭控制器, 自我销毁"</span>);</div><div class="line">    &#125;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>##3.2. Modal的数据传递</p>
<p>同样分为两种形式, 数据的顺传和逆传 :</p>
<ul>
<li>数据传递顺传(导航控制器Segue使用这个类似)</li>
<li>数据逆传使用<code>代理</code></li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender</div><div class="line">&#123;</div><div class="line">    NSLog(@<span class="string">"%@"</span>, segue.destinationViewController);</div><div class="line">    UINavigationController *nav = segue.destinationViewController;</div><div class="line">    NSLog(@<span class="string">"%@"</span>, nav.topViewController); <span class="comment">//拿到栈顶控制器</span></div><div class="line">    TwoViewController *two = (TwoViewController *)nav.topViewController;</div><div class="line">    two.name = @<span class="string">"我这条数据将会传送给下一个控制器"</span>;  <span class="comment">//在two控制器中头文件定义name属性</span></div><div class="line">    </div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</div><div class="line">    [super viewDidLoad];</div><div class="line">    NSLog(@<span class="string">"%@"</span>, self.name);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="4-strong和weak"><a href="#4-strong和weak" class="headerlink" title="#4. strong和weak"></a>#4. strong和weak</h2><ul>
<li><code>strong</code> 修饰称为强指针/强引用(<code>默认情况下, 任何指针都是强指针</code>)</li>
<li><code>weak</code> 修饰弱指针/弱引用(<code>使用__weak修饰的指针</code>)</li>
</ul>
<blockquote>
<p>ARC 判断准则: 只要没有任何强指针指向对象, 对象就被销毁<br>写一个@proerty 会自动生成一个_变量</p>
</blockquote>
<p><code>@property属性的用法</code>:</p>
<ul>
<li>weak(assign): 代理/UI控件</li>
<li>strong(retain): 其他对象(除了代理/UI控件/字符串以外的对象)</li>
<li>copy: 字符串</li>
<li>assign: 非对象类型(基本数据类型int/float/BOOL/枚举/结构体)</li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2014/12/19/Python爬虫-八-Scrapy模拟登录/" class="prev">PREV</a><a href="/2014/12/17/Python爬虫-四-Scrapy框架学习/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'snow-memory';
var disqus_identifier = '2014/12/19/IOS之UITabBarController/';
var disqus_title = 'IOS之UITabBarController';
var disqus_url = 'http://andrewliu.in/2014/12/19/IOS之UITabBarController/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//snow-memory.disqus.com/count.js" async></script><div class="copyright"><p>© 2014 - 2017 <a href="http://andrewliu.in">Andrew Liu</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-58158116-2",'auto');ga('send','pageview');</script></body></html>