<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 非零基础JavaScript简易指南 · Snow Memory | Andrew Liu</title><meta name="description" content="非零基础JavaScript简易指南 - Andrew Liu"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://andrewliu.in/atom.xml" title="Snow Memory | Andrew Liu"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/dinosaurliu" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/Andrew-liu" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">非零基础JavaScript简易指南</h1><div class="post-info">Feb 16, 2015</div><div class="post-content"><p>本博客采用创作共用版权协议, 要求署名、非商业用途和保持一致. 转载本博客文章必须也遵循<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh" target="_blank" rel="external">署名-非商业用途-保持一致</a>的创作共用协议.</p>
<blockquote>
<p>写作意图: 一直通过一些视频或者网页零碎的学习JavaScript, 整个语言一直难以形成系统, 所以希望利用一些时间系统的学习一下JavaScript语言.</p>
</blockquote>
<p>写作目标:</p>
<ul>
<li>希望构建JavaScript语言体系, 将零碎知识点系统化</li>
<li>希望以简单的语言, 能够使有编程基础的人快速入门JavaScript</li>
</ul>
<blockquote>
<p>注意: 本书并不针对零基础者, 很多基础内容会一笔带过, <code>本书大部分内容基于&lt;JavaScript权威指南&gt;进行总结</code>.</p>
</blockquote>
<hr>
<p>#0. JavaScript概述</p>
<blockquote>
<p>JavaScript是一门高端的, 动态的, 弱类型的编程语言</p>
</blockquote>
<ul>
<li>语言区分大小写</li>
<li>用<code>unicode</code>编码编写</li>
<li>注释使用<code>// 单行注释</code>或者<code>/* 多行注释 */</code>, 和C++相同</li>
<li>以<code>;</code>作为行间分隔符可选, 可以使用C++风格或者Python风格</li>
</ul>
<a id="more"></a>
<h2 id="1-类型-值和变量"><a href="#1-类型-值和变量" class="headerlink" title="#1. 类型/值和变量"></a>#1. 类型/值和变量</h2><blockquote>
<p>JavaScript的数据类型分为: 原始类型和对象类型.</p>
</blockquote>
<ul>
<li>原始类型包括数字类型, 字符串类型, 布尔类型, null和undefined(<code>最后两种是特殊的原始值</code>)</li>
<li>对象类型包括普通对象, 具有特有行为的array数组对象和函数对象</li>
</ul>
<blockquote>
<p>JavaScript的数据类型也可分为: 可变类型和不可变类型</p>
</blockquote>
<ul>
<li>可变类型包括数组和对象(可变类型的比较是引用的比较)</li>
<li>不可变类型包括数字类型, 字符串类型, 布尔类型, null和undefined(不可变类型的比较为值的比较)</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [], b = [];</div><div class="line">a === b;  <span class="comment">// false</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> a = [];</div><div class="line"><span class="keyword">var</span> b = a;</div><div class="line">b[<span class="number">0</span>] = <span class="number">1</span>;</div><div class="line">a[<span class="number">0</span>];</div><div class="line">a === b;  <span class="comment">// true</span></div></pre></td></tr></table></figure>
<blockquote>
<p>JavaScript变量是无类型的, 可以被赋予任何类型值</p>
</blockquote>
<p><strong>数字</strong></p>
<p><strong>JavaScript无整数和浮点数之分, 所有数字都用浮点数(IEEE754)表示</strong></p>
<p>JavaScript中算数运算在溢出, 下溢或被零整除时不会报错, 溢出或者被零整除返回<code>Infinity</code>或<code>-Infinity</code>, 下溢返回0和-0,</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">2</span>  </div><div class="line"><span class="number">3.14</span></div><div class="line"><span class="number">4.15e23</span> <span class="comment">// 4.15 * 10^23</span></div></pre></td></tr></table></figure>
<blockquote>
<p>判断变量x是否是NaN(非数字值), 若x != x为true, 则x为NaN</p>
</blockquote>
<p><strong>字符串</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="string">""</span></div><div class="line"><span class="string">'string'</span></div><div class="line"><span class="string">"JavaScript"</span></div><div class="line"><span class="string">'name = "Andrew"'</span></div></pre></td></tr></table></figure>
<ul>
<li>支持字符串<code>+</code>拼接操作</li>
<li>字符串length属性, str.length</li>
<li>支持定位, 取子串, 切片, 分割, 替换等字符串操作</li>
</ul>
<blockquote>
<p>字符串本身是不可变的!</p>
</blockquote>
<p><strong>布尔值</strong></p>
<p>true和false</p>
<ul>
<li>undefined, null, 0, -0, NaN, “”转换为false</li>
<li>其他值包括对象(数组)会转换成true</li>
</ul>
<p><strong>类型转换</strong></p>
<p><strong>显式类型转换</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Number</span>(<span class="string">"3"</span>);  <span class="comment">// 转换为数字3</span></div><div class="line"><span class="built_in">String</span>(<span class="literal">false</span>);  <span class="comment">// 转换为字符串"false"</span></div><div class="line"><span class="built_in">Boolean</span>([]);  <span class="comment">// 转换为布尔值true</span></div><div class="line"><span class="built_in">Object</span>(<span class="number">3</span>);  <span class="comment">//  转换为对象Number &#123;[[PrimitiveValue]]: 3&#125;</span></div></pre></td></tr></table></figure>
<p><strong>隐式类型转换</strong></p>
<ul>
<li><code>+</code>运算一个操作数是字符串, 会将另一个操作数转换为字符串</li>
<li><code>!</code>运算会把操作数转换为布尔值</li>
</ul>
<p><strong>变量声明</strong></p>
<p>使用var关键字声明</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> i = <span class="number">0</span>;</div><div class="line"><span class="keyword">var</span> str = <span class="string">"hello"</span>;</div><div class="line"><span class="keyword">var</span> first = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</div></pre></td></tr></table></figure>
<p><strong>作用域</strong></p>
<ul>
<li>函数体内, 同名局部变量的优先级高于全局变量(局部变量和全局变量同名不是好的编程习惯)</li>
<li>JavaScript中没有块级作用域, 使用函数作用域(函数内声明在整个函数体都是可见的)</li>
</ul>
<h2 id="2-表达式和运算符"><a href="#2-表达式和运算符" class="headerlink" title="#2. 表达式和运算符"></a>#2. 表达式和运算符</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> matrix = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];  <span class="comment">// 数组初始化</span></div><div class="line"><span class="keyword">var</span> p = &#123; <span class="attr">x</span>: <span class="number">2.3</span>, <span class="attr">y</span>: <span class="number">1.8</span>&#125;;  <span class="comment">// 对象初始化</span></div><div class="line"><span class="keyword">var</span> square = <span class="function"><span class="keyword">function</span> </span>&#123;  <span class="comment">// 函数直接量</span></div><div class="line">    <span class="keyword">return</span> x * x;</div><div class="line">&#125;</div><div class="line"><span class="comment">// 属性访问.语法和[]语法</span></div><div class="line"><span class="comment">// 调用表达式()语法, 如函数调用</span></div><div class="line"><span class="comment">// 创建对象使用new关键字</span></div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">基本算术表达式: + - * / %</div><div class="line">一元算术运算符: + - ++ --  // 会把操作数转换为数字</div><div class="line">位运算符: &amp; | ~ &lt;&lt; &gt;&gt; &gt;&gt;&gt; // 操作数为32位整数, 最后一个运算符为无符号右移</div><div class="line">比较运算符: &lt; &gt; &lt;= &gt;= == ===  // 注意区分最后两个</div><div class="line">逻辑表达式: &amp;&amp; || !</div><div class="line">三目运算符: ? :  // 基本类似C++中的运算符</div><div class="line"></div><div class="line">typeof  </div><div class="line">(typeof value == "string") ? "'" + value + "'" : value;</div><div class="line"></div><div class="line">delete  // 删除对象属性或者数组元素</div><div class="line">var o = &#123;x: 1, y: 2&#125;</div><div class="line">delete o.x;</div><div class="line">"x" in o;  // false</div><div class="line"></div><div class="line">in  // 希望左操作是一个字符串, 右侧对象拥有一个名为左操作数值的属性名则返回true</div><div class="line">var point = &#123; x: 1, y: 1&#125;;</div><div class="line">"x" in point;  // true</div><div class="line">"z" in point;  // false</div><div class="line"></div><div class="line">instanceof  // 希望做操作数是一个对象, 如果左侧对象是右侧类的实例, 则返回true</div><div class="line">var d = new Date();</div><div class="line">d instanceof Date;  // true</div><div class="line">d instanceof Number;  // false</div></pre></td></tr></table></figure>
<h2 id="3-语句"><a href="#3-语句" class="headerlink" title="#3. 语句"></a>#3. 语句</h2><p><strong>定义变量</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// var name_1 [= value_1] [ ,..., name_n [= value_n]] </span></div><div class="line"><span class="keyword">var</span> x = <span class="number">2</span>,</div><div class="line">    f = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123; <span class="keyword">return</span> x * x; &#125;,</div><div class="line">    y = f(x);</div></pre></td></tr></table></figure>
<p><strong>定义函数</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">funcname</span>(<span class="params">[arg1 [, arg2 [..., argn]]]</span>) </span>&#123;</div><div class="line">    statement;</div><div class="line">&#125;   <span class="comment">// 函数定义格式</span></div><div class="line"><span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params">x</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> x * x;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>if else语句</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (expression) &#123;</div><div class="line">    <span class="comment">// 执行代码块1</span></div><div class="line">&#125; </div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span> (expression) &#123;</div><div class="line">    <span class="comment">// 执行代码块2</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> &#123;</div><div class="line">    <span class="comment">// 执行代码块3</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>switch语句</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// case表达式和expression的值按照===比较</span></div><div class="line"><span class="keyword">switch</span>(expression) &#123;</div><div class="line">    <span class="keyword">case</span> value1:</div><div class="line">    <span class="comment">//执行代码1</span></div><div class="line">    <span class="keyword">break</span>;</div><div class="line">    <span class="keyword">case</span> value2:</div><div class="line">    <span class="comment">//执行代码2</span></div><div class="line">    <span class="keyword">break</span>;</div><div class="line">    <span class="keyword">case</span> value3:</div><div class="line">    <span class="comment">//执行代码3</span></div><div class="line">    <span class="keyword">break</span>;</div><div class="line">    <span class="keyword">default</span>:</div><div class="line">    <span class="comment">//执行代码4</span></div><div class="line">    <span class="keyword">break</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>四种循环while,do-while,for,for-in</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">while</span>(expression) &#123;</div><div class="line">    statement;</div><div class="line">&#125;</div><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">    statement;</div><div class="line">&#125; <span class="keyword">while</span>(expression);  <span class="comment">// 注意分号结尾</span></div><div class="line"><span class="keyword">for</span>(initialize; test; increment) &#123;</div><div class="line">    statement;</div><div class="line">&#125;</div><div class="line"><span class="keyword">for</span>(variable <span class="keyword">in</span> object) &#123;  <span class="comment">// 常用语遍历对象属性成员</span></div><div class="line">    statement;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>break语句跳转到循环(最内层)或者其他语句结束</li>
<li>continue语句终止本次循环并开始下一次循环</li>
<li>return语句让解释器跳出函数体执行(<code>直接return; 返回的是undefined</code>)</li>
<li>throw语句触发或者抛出一个异常</li>
</ul>
<h2 id="4-对象"><a href="#4-对象" class="headerlink" title="#4. 对象"></a>#4. 对象</h2><blockquote>
<p>JavaScript对象都是关联数组<br>所有JavaScript对象都从Object.prototype继承属性</p>
</blockquote>
<p><strong>创建对象</strong></p>
<p>三种方法:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> point = &#123;<span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">1</span>&#125;;  <span class="comment">// 对象直接量</span></div><div class="line"><span class="keyword">var</span> point1 = <span class="keyword">new</span> <span class="built_in">Object</span>();  <span class="comment">// 使用new关键字创建一个空对象</span></div><div class="line"><span class="keyword">var</span> point2 = <span class="built_in">Object</span>.create(&#123;<span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">2</span>&#125;);  <span class="comment">//使用Object.create()静态函数point3继承属性x和y</span></div></pre></td></tr></table></figure>
<p><strong>查询和设置属性</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> first = point.x;  <span class="comment">// .语法</span></div><div class="line"><span class="keyword">var</span> second = point[<span class="string">"y"</span>];  <span class="comment">// []语法</span></div></pre></td></tr></table></figure>
<p><strong>删除属性</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">delete</span> point.x;</div><div class="line">(<span class="keyword">delete</span> point[<span class="string">"y"</span>]) == <span class="literal">true</span>;  <span class="comment">// delete删除成功或没有副作用则返回true</span></div></pre></td></tr></table></figure>
<blockquote>
<p>delete不可删除继承属性, 只能删除自有属性</p>
</blockquote>
<p><strong>检测属性</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="string">"x"</span> <span class="keyword">in</span> point;  <span class="comment">// true</span></div><div class="line"><span class="string">"toString"</span> <span class="keyword">in</span> point  <span class="comment">// true, 继承属性</span></div><div class="line">point.hasOwnProperty(<span class="string">"toString"</span>);  <span class="comment">// false, hasOwnProperty方法检测是否是自有属性</span></div><div class="line">point.propertyIsEnumerable(<span class="string">"toString"</span>);  <span class="comment">// false, 检测自有属性且属性可枚举</span></div></pre></td></tr></table></figure>
<p><strong>枚举属性</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span>(p <span class="keyword">in</span> point) &#123;</div><div class="line">    <span class="keyword">if</span> (!point.hasOwnProperty(p))   <span class="comment">// 跳过非自有属性</span></div><div class="line">        <span class="keyword">continue</span>;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> point[p] === <span class="string">"function"</span>)  <span class="comment">// 跳过方法</span></div><div class="line">        <span class="keyword">continue</span>;</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="built_in">console</span>.log(p);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>属性getter和setter</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> point = &#123;</div><div class="line">    <span class="attr">date_prop</span>: value,</div><div class="line">    <span class="comment">// 存取器属性都是成对定义的函数</span></div><div class="line">    get accessor_prop() &#123;&#125;,</div><div class="line">    set accessor_prop(value) &#123;&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p><strong>对象的三属性</strong></p>
<ul>
<li>原型prototype</li>
<li>类class</li>
<li>可扩展性extensible attribute</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> p = &#123;<span class="attr">x</span>: <span class="number">1</span>&#125;;</div><div class="line"><span class="keyword">var</span> o = <span class="built_in">Object</span>.create(p);</div><div class="line">p.isPrototypeOf(o);  <span class="comment">// true, o集成自p</span></div><div class="line"><span class="built_in">Object</span>.prototype.isPrototypeOf(p);  <span class="comment">// true, p继承自Object.prototype</span></div><div class="line"></div><div class="line"><span class="comment">//返回任意对象的类</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">classof</span>(<span class="params">o</span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (o === <span class="literal">null</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Null"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">if</span> (o === <span class="literal">undefined</span>) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Undefined"</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(o).slice(<span class="number">8</span>, <span class="number">-1</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>序列化对象</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> point = &#123;</div><div class="line">    <span class="attr">x</span>: <span class="number">1</span>,</div><div class="line">    <span class="attr">y</span>: &#123;</div><div class="line">        <span class="attr">z</span>: [<span class="literal">false</span>, <span class="literal">null</span>, <span class="string">""</span>]</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">s = <span class="built_in">JSON</span>.stringify(point);  <span class="comment">// JSON字符串化对象</span></div><div class="line">p = <span class="built_in">JSON</span>.parse(s);  <span class="comment">// 还原对象, p是point的深拷贝</span></div></pre></td></tr></table></figure>
<h2 id="5-数组"><a href="#5-数组" class="headerlink" title="#5. 数组"></a>#5. 数组</h2><blockquote>
<p>JavaScript数组是动态的额, 数组元素无类型(可以存放任意类型), <code>数组是对象的特殊形式</code></p>
</blockquote>
<p><strong>创建数组</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> misc = [<span class="number">1.1</span>, <span class="literal">true</span>, <span class="string">"a"</span>,];  <span class="comment">// 数组直接量允许结尾有逗号</span></div><div class="line"><span class="keyword">var</span> undes = [,,];  <span class="comment">// 两个undefined的元素</span></div><div class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Array</span>();  <span class="comment">//构造一个空数组</span></div><div class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10</span>);  <span class="comment">//创建指定长度数组, 数组中没有值(没有undefined)</span></div><div class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">"test"</span>);  <span class="comment">// 构造带元素的数组</span></div></pre></td></tr></table></figure>
<p><strong>数组的读取和写入</strong></p>
<p><code>下标访问, 从零开始</code></p>
<blockquote>
<p>通过<code>var a = new Array(10);</code>可以创建稀疏数组</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = [];</div><div class="line">a.push(<span class="number">5</span>);  <span class="comment">// 末尾添加元素</span></div><div class="line">a.pop();  <span class="comment">// length长度减一,并删除元素</span></div><div class="line"><span class="keyword">delete</span> a[<span class="number">0</span>];  <span class="comment">// 删除元素, delete操作不影响数组的length值</span></div></pre></td></tr></table></figure>
<p><strong>多维数组</strong></p>
<p>使用数组的数组进行近似, 风格和访问与C++中类似</p>
<p><strong>数组方法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">var a = [1, 2, 3];</div><div class="line">a.join();  // 数组拼接, 默认使用,拼接成字符串, 是String.split的逆方法</div><div class="line">a.reverse();  // 数组逆序</div><div class="line">a.sort();  // 数组排序</div><div class="line">a.concat([1, 2]);  // 数组拼接, 返回新数组</div><div class="line">a.slice(0, 2);  // 数组切片</div><div class="line">a.splice(删除起始位置[, 删除个数[, 插入元素]]);  // 在数组中插入或删除元素</div><div class="line">a.push(), a.pop();  // 数组模拟栈</div><div class="line">a.unshift(), a.shift();  // 数组头部添加和删除元素</div><div class="line">a.toString();  // 每个元素字符串化</div><div class="line"></div><div class="line">/* ECMAScript 5数组方法 */</div><div class="line">forEach();  // 从头到尾遍历数组, 为每个元素调用指定函数</div><div class="line">map();  // 对每个元素调用指定元素, 并返回数组</div><div class="line">filter();  // 返回满足函数逻辑的元素的数组(子集)</div><div class="line">every(), some(); // 对数组元素应用指定函数判定, 返回true或false</div><div class="line">reduce(操作函数[, 可选传递给操作函数的初始参数])</div><div class="line">indexOf(), lastIndexOf();  // 搜索整个数组具有给定值的元素</div><div class="line">Array.isArray([]);  // true, 判断是否为数组</div></pre></td></tr></table></figure>
<h2 id="6-函数"><a href="#6-函数" class="headerlink" title="#6. 函数"></a>#6. 函数</h2><blockquote>
<p>函数即对象</p>
</blockquote>
<p> <strong>函数定义</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">funcname</span>(<span class="params">参数</span>) </span>&#123;  <span class="comment">// 可以赋值给变量, 存在一个arguments指向实参对象的引用</span></div><div class="line">    <span class="comment">/* 执行代码 */</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>函数length属性代表函数参数的数量</li>
<li>prototype属性</li>
<li>call()和apply()方法</li>
<li>bind()方法, 将一个函数绑定到对象中, 作为对象的方法</li>
<li>Function()构造函数, 可以传入任意数量的字符串实参, 最后一个实参表示的文本就是函数体(<code>不能用来实现闭包</code>), 匿名</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">f.call(o)  <span class="comment">// 类似于o.f()</span></div><div class="line">f.apply(o)</div><div class="line"></div><div class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"x"</span>, <span class="string">"y"</span>, <span class="string">"return x * y;"</span>);</div><div class="line"><span class="comment">// 等价于var f = function(x, y)&#123; return x * y; &#125;</span></div></pre></td></tr></table></figure>
<p>#7. 类和模块</p>
<blockquote>
<p>JavaScript中类的实现<code>基于原型</code>继承机制, JavaScript中的类是动态可继承的</p>
</blockquote>
<p><strong>关键字new调用构造函数,自动创建一个新对象,构造函数的prototype属性被用作新对象的原型,构造函数对已创建的对象初始化</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Range</span>(<span class="params">from, to</span>) </span>&#123;</div><div class="line">    <span class="keyword">this</span>.from = <span class="keyword">from</span>;</div><div class="line">    <span class="keyword">this</span>.to = to;</div><div class="line">&#125;</div><div class="line">Range.prototype = &#123;  <span class="comment">// Range()构造函数自动使用Range.prototype作为新Range对象的原型</span></div><div class="line">    <span class="keyword">constructor</span>: Range,  // 显式设置构造函数反向引用</div><div class="line">    includes: function(x) &#123; <span class="keyword">return</span> <span class="keyword">this</span>.from &lt;= x &amp;&amp; x &lt;= <span class="keyword">this</span>.to; &#125;,</div><div class="line">    <span class="attr">foreach</span>: <span class="function"><span class="keyword">function</span>(<span class="params">f</span>) </span>&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> x = <span class="built_in">Math</span>.ceil(<span class="keyword">this</span>.from); x &lt;= <span class="keyword">this</span>.to; x++) f(x);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">toString</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="string">"("</span> + <span class="keyword">this</span>.from + <span class="string">"..."</span> + <span class="keyword">this</span>.to + <span class="string">")"</span> &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">var</span> r = <span class="keyword">new</span> Range(<span class="number">1</span>, <span class="number">3</span>);</div></pre></td></tr></table></figure>
<p><strong>检测任意对象的类:</strong></p>
<ol>
<li>使用instanceof运算符</li>
<li>constructor属性(前两种方法在多个执行上下文场景中无法正常工作)</li>
<li>构造函数的名字</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> r = <span class="keyword">new</span> Range(<span class="number">1</span>, <span class="number">3</span>);</div><div class="line">r.constructor === Range  <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="comment">/* 除了没有名字的函数和不具有constructor对象都能够识别 */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">type</span>(<span class="params">o</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> t, c, n;</div><div class="line">    <span class="keyword">if</span> (o === <span class="literal">null</span>) </div><div class="line">        <span class="keyword">return</span> <span class="string">"null"</span>;</div><div class="line">    <span class="keyword">if</span> (o !== o)</div><div class="line">        <span class="keyword">return</span> <span class="string">"nan"</span>;</div><div class="line">    <span class="keyword">if</span> ((t = <span class="keyword">typeof</span> o) !== <span class="string">"object"</span>) </div><div class="line">        <span class="keyword">return</span> t;  <span class="comment">// 识别原始值的类型和函数</span></div><div class="line">    <span class="keyword">if</span> ((c = classof(o)) !== <span class="string">"Object"</span>)</div><div class="line">        <span class="keyword">return</span> c;  <span class="comment">// 识别出大多数内置类型</span></div><div class="line">    <span class="keyword">if</span> (o.constructor &amp;&amp; <span class="keyword">typeof</span> o.constructor === <span class="string">"function"</span> &amp;&amp;</div><div class="line">        (n = o.constructor.getName()))</div><div class="line">        <span class="keyword">return</span> n;  <span class="comment">//如果对象构造函数名字存在, 则返回</span></div><div class="line">    <span class="keyword">return</span> <span class="string">"Object"</span>;  <span class="comment">// 无法识别类型返回"Object"</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">classof</span>(<span class="params">o</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(o).slice(<span class="number">8</span>, <span class="number">-1</span>);</div><div class="line">&#125;</div><div class="line"><span class="built_in">Function</span>.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">if</span> (<span class="string">"name"</span> <span class="keyword">in</span> <span class="keyword">this</span>)</div><div class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name = <span class="keyword">this</span>.toString().match(<span class="regexp">/function\s*([^(]*)\(/</span>)[<span class="number">1</span>];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>子类</strong></p>
<p>B是A的子类</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">B.prototype = inherit(A.prototype);</div><div class="line">B.prototype.constructor = B;</div></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a href="/2015/02/24/Github资源整理/" class="prev">PREV</a><a href="/2015/02/08/试玩USRP/" class="next">NEXT</a></div><div class="copyright"><p>© 2014 - 2017 <a href="http://andrewliu.in">Andrew Liu</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-58158116-2",'auto');ga('send','pageview');</script></body></html>